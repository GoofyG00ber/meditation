<template>
  <div class="min-h-screen bg-linear-to-br from-indigo-900 via-purple-900 to-blue-900 text-white">
    <div class="container mx-auto px-6 py-12">
      <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12">
          <h1 class="text-4xl font-bold mb-4">üåô Test-laz√≠t√≥ Body Scan</h1>
          <p class="text-lg text-gray-300">Az izmok √©s idegrendszer m√©ly ellaz√≠t√°sa</p>
          <p class="text-sm text-gray-400 mt-2">Id≈ëtartam: 5‚Äì8 perc</p>
        </div>

        <!-- Points Info -->
        <PointsInfo exercise-type="evening" :fixed-points="60" />

        <!-- Hero Image -->
        <div class="mb-12 rounded-2xl overflow-hidden shadow-2xl">
          <img :src="heroImage" alt="Body Scan medit√°ci√≥" class="w-full h-64 object-cover" loading="lazy" />
        </div>

        <!-- Introduction -->
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 shadow-lg mb-8">
          <h2 class="text-2xl font-bold mb-4">C√©l</h2>
          <p class="text-gray-200 leading-relaxed mb-4">
            A test √©s az elme lelass√≠t√°sa, a fesz√ºlts√©g tudatos old√°sa, m√©ly testi-lelki megpihen√©s el≈ëk√©sz√≠t√©se.
          </p>
          <div class="bg-purple-500/30 border-l-4 border-purple-400 p-4 rounded">
            <p class="font-medium">
              üí° A Body Scan tudatos√≠tja a rejtett izomfesz√ºl√©seket, √©s aktiv√°lja a vagus-ideget,
              ami lelass√≠tja a pulzust √©s megnyugtatja a testet.
              Klinikai kutat√°sok szerint jav√≠tja az alv√°smin≈ës√©get √©s cs√∂kkenti az √°lmatlans√°g t√ºneteit.
            </p>
          </div>
        </div>

        <!-- Practice Steps -->
        <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 shadow-lg mb-8">
          <h2 class="text-2xl font-bold mb-6">Hogyan csin√°ld?</h2>

          <div class="space-y-6">
            <!-- Step 1 -->
            <div class="flex gap-4">
              <div class="shrink-0 w-12 h-12 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-lg">1</div>
              <div class="flex-1">
                <h3 class="text-xl font-semibold mb-2">Helyezkedj el k√©nyelmesen</h3>
                <p class="text-gray-200 leading-relaxed">
                  Fek√ºdj a h√°tadra, √©s engedd, hogy a tested beles√ºppedjen az √°gyba vagy a sz≈ënyegbe.
                  Tegy√©l p√°rn√°t a t√©rded vagy a fejed al√°, ha √≠gy k√©nyelmesebb.
                  Ha nem tudsz lefek√ºdni, √ºlve is gyakorolhatod ‚Äì a l√©nyeg, hogy a tested stabil, m√©gis laza legyen.
                  Z√°rd be a szemed, √©s mondd magadban: <span class="italic font-medium">"Most elengedem a napot."</span>
                </p>
              </div>
            </div>

            <!-- Step 2 -->
            <div class="flex gap-4">
              <div class="shrink-0 w-12 h-12 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-lg">2</div>
              <div class="flex-1">
                <h3 class="text-xl font-semibold mb-2">L√©legezz m√©lyen √©s lassan</h3>
                <p class="text-gray-200 leading-relaxed">
                  Kezdj n√©h√°ny tudatos, m√©ly l√©legzettel. L√©legezz be az orrodon kereszt√ºl,
                  √©s √©rezd, ahogy a leveg≈ë megt√∂lti a hasad ‚Äì nem a mellkasod.
                  Kil√©gz√©skor engedd, hogy minden fesz√ºlts√©g t√°vozzon.
                  A v√°llak maradjanak laz√°k, a l√©gz√©s pedig term√©szetes, ritmusos, csendes.
                </p>
              </div>
            </div>

            <!-- Step 3 -->
            <div class="flex gap-4">
              <div class="shrink-0 w-12 h-12 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-lg">3</div>
              <div class="flex-1">
                <h3 class="text-xl font-semibold mb-2">Ir√°ny√≠tsd a figyelmed a l√°baidra</h3>
                <p class="text-gray-200 leading-relaxed">
                  √ârezd a talpad √©rintkez√©s√©t az √°ggyal, a s√∫lyodat, a h≈ëm√©rs√©kletet.
                  Lehet, hogy bizserg√©st, melegs√©get vagy enyhe fesz√ºlts√©get tapasztalsz ‚Äì b√°rmit √©rzel, az rendben van.
                  Ne pr√≥b√°lj v√°ltoztatni rajta, csak figyeld.
                  Ha fesz√ºlts√©get √©rzel, l√©legezz bele, √©s k√©pzeld el, hogy a kil√©gz√©ssel ez a fesz√ºlts√©g lassan elp√°rolog.
                </p>
              </div>
            </div>

            <!-- Step 4 -->
            <div class="flex gap-4">
              <div class="shrink-0 w-12 h-12 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-lg">4</div>
              <div class="flex-1">
                <h3 class="text-xl font-semibold mb-2">Haladj felfel√© ‚Äì l√©p√©sr≈ël l√©p√©sre</h3>
                <p class="text-gray-200 leading-relaxed">
                  Vezesd v√©gig a figyelmedet a l√°bakon, a hason, mellkason, karokon, v√°llakon √©s a nyakon √°t eg√©szen a fejed b√∫bj√°ig.
                  Minden testr√©szn√©l √°llj meg n√©h√°ny m√°sodpercre, figyeld az √©rz√©seket ‚Äì meleget, l√ºktet√©st, nyugalmat vagy √©pp fesz√ºlts√©get.
                  Ha b√°rhol kellemetlens√©get √©szlelsz, l√©legezz oda, √©s engedd el a kil√©gz√©ssel.
                </p>
              </div>
            </div>

            <!-- Step 5 -->
            <div class="flex gap-4">
              <div class="shrink-0 w-12 h-12 bg-purple-500 text-white rounded-full flex items-center justify-center font-bold text-lg">5</div>
              <div class="flex-1">
                <h3 class="text-xl font-semibold mb-2">Tudatos√≠tsd az eg√©sz tested</h3>
                <p class="text-gray-200 leading-relaxed">
                  Amikor a fejedhez √©rsz, k√©pzeld el, hogy az eg√©sz tested egyszerre l√©legzik.
                  √ârezd, ahogy minden bel√©gz√©ssel friss leveg≈ë, minden kil√©gz√©ssel megk√∂nnyebb√ºl√©s j√°r √°t.
                  Maradj ebben az √©rz√©sben n√©h√°ny percig ‚Äì a teljes ellazul√°s, a biztons√°g √©s a csend √°llapot√°ban.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Benefits -->
        <div class="bg-linear-to-r from-purple-600 to-indigo-600 rounded-2xl p-8 shadow-lg mb-8">
          <h2 class="text-2xl font-bold mb-4">Mi√©rt hat√°sos?</h2>
          <div class="grid md:grid-cols-2 gap-4">
            <div class="flex items-start gap-3">
              <span class="text-2xl">‚úì</span>
              <p>Aktiv√°lja a paraszimpatikus idegrendszert ‚Üí lelassul a pulzus, cs√∂kken a v√©rnyom√°s</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="text-2xl">‚úì</span>
              <p>Oldja az izomfesz√ºlts√©get √©s cs√∂kkenti a stresszhormonokat (kortizol, adrenalin)</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="text-2xl">‚úì</span>
              <p>Fokozza az alv√°s min≈ës√©g√©t ‚Äì k√∂nnyebb elalv√°st √©s m√©lyebb pihen√©st biztos√≠t</p>
            </div>
            <div class="flex items-start gap-3">
              <span class="text-2xl">‚úì</span>
              <p>Er≈ës√≠ti a test-tudatot, ami seg√≠t felismerni √©s megel≈ëzni a felgy√ºlemlett fesz√ºlts√©geket</p>
            </div>
          </div>
        </div>

        <!-- Back Button -->
        <div class="mt-8 flex justify-center gap-4">
          <router-link
            to="/sessions"
            class="inline-block bg-purple-500 hover:bg-purple-600 text-white font-semibold px-8 py-3 rounded-lg transition-colors"
          >
            ‚Üê Vissza a gyakorlatokhoz
          </router-link>

          <button
            v-if="authStore.isAuthenticated && !completed"
            @click="() => completeExercise()"
            :disabled="completing"
            class="bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-semibold px-8 py-3 rounded-lg transition-colors"
          >
            {{ completing ? 'Ment√©s...' : 'Gyakorlat befejezve ‚úì' }}
          </button>
        </div>

        <!-- Completion Message -->
        <div v-if="completed" class="mt-6 bg-green-50 border-l-4 border-green-500 rounded-lg p-6 text-center">
          <p class="text-lg font-semibold text-green-800">üéâ Gratul√°lunk! Befejezted a gyakorlatot!</p>
          <p class="text-green-700 mt-2">+{{ earnedPoints }} pont</p>
        </div>
      </div>
    </div>

    <!-- Badge Modal -->
    <BadgeModal
      v-if="newBadge"
      :show="showBadgeModal"
      :badge="newBadge"
      @close="closeBadgeModal"
    />
  </div>
</template>

<script setup lang="ts">
import { nextPlaceholder } from '../../utils/placeholders'
import { useAuthStore } from '../../stores/auth'
import { useMeditationPoints } from '../../composables/useMeditationPoints'
import PointsInfo from '../../components/PointsInfo.vue'
import BadgeModal from '../../components/BadgeModal.vue'

const heroImage = nextPlaceholder()
const authStore = useAuthStore()

const {
  completed,
  completing,
  earnedPoints,
  showBadgeModal,
  newBadge,
  completeExercise,
  closeBadgeModal
} = useMeditationPoints('evening')
</script>
